(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{866:function(e,t,r){"use strict";r.r(t);var o=r(5),n=(r(15),r(1)),l=r(19),d={layout:"user_dashboard",mounted:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.formData.displayName=this.user.displayName,this.formData.email=this.user.email,this.isLoading=!1;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),data:function(){return{isLoading:!0,formData:{displayName:null,email:null,password:null,password_confirmation:null}}},computed:Object(o.a)({},Object(l.b)({user:"user/user"})),methods:{updateProfile:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(e.sent&&!this.isLoading){e.next=5;break}return e.abrupt("return");case 5:return this.isLoading=!0,e.next=8,this.$store.dispatch("user/updateProfile",this.formData);case 8:if(t=e.sent,r=null,!this.formData.password||this.formData.password!==this.formData.password_confirmation){e.next=14;break}return e.next=13,this.$store.dispatch("user/updatePassword",this.formData.password);case 13:r=e.sent;case 14:return e.next=16,this.$store.dispatch("user/refreshToken");case 16:if(t.status&&(!r||r.status)){e.next=20;break}return this.isLoading=!1,this.$toast.error("Updating the profile failed! Please try again.",{position:"bottom"}),e.abrupt("return");case 20:this.formData.password=null,this.formData.password_confirmation=null,this.$toast.success("Profile updated successfully!",{position:"top"}),this.isLoading=!1;case 24:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},m=r(7),component=Object(m.a)(d,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"relative"},[e.isLoading?r("AreaLoader"):e._e(),e._v(" "),r("div",{staticClass:"py-4"},[e._m(0),e._v(" "),r("form",{staticClass:"w-6/12 mx-auto",on:{submit:function(t){return t.preventDefault(),e.updateProfile(t)}}},[r("div",{staticClass:"mb-3"},[r("label",{staticClass:"font-bold",attrs:{for:"displayName"}},[e._v("Full Name")]),e._v(" "),r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.displayName,expression:"formData.displayName"}],staticClass:"w-full py-2 px-3 border rounded focus:outline-none outline-none",class:{"border-red-400":e.errors.has("displayName"),"focus:border-gray-600":!e.errors.has("displayName")},attrs:{type:"text",name:"displayName",placeholder:"Your Name"},domProps:{value:e.formData.displayName},on:{input:function(t){t.target.composing||e.$set(e.formData,"displayName",t.target.value)}}})]),e._v(" "),e.errors.has("displayName")?r("span",{staticClass:"text-red-700 text-xs pt-1 font-bold inline-block"},[e._v(e._s(e.errors.first("displayName")))]):e._e()]),e._v(" "),r("div",{staticClass:"mb-3"},[r("label",{staticClass:"font-bold",attrs:{for:"email"}},[e._v("Email Address")]),e._v(" "),r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.email,expression:"formData.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"w-full py-2 px-3 border rounded focus:outline-none outline-none",class:{"border-red-400":e.errors.has("email"),"focus:border-gray-600":!e.errors.has("email")},attrs:{type:"text",name:"email",placeholder:"Your Email Address","data-vv-as":"Email Address"},domProps:{value:e.formData.email},on:{input:function(t){t.target.composing||e.$set(e.formData,"email",t.target.value)}}})]),e._v(" "),e.errors.has("email")?r("span",{staticClass:"text-red-700 text-xs pt-1 font-bold inline-block"},[e._v(e._s(e.errors.first("email")))]):e._e()]),e._v(" "),r("div",{staticClass:"mb-3"},[r("label",{staticClass:"font-bold",attrs:{for:"password"}},[e._v("New Password")]),e._v(" "),r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.password,expression:"formData.password"},{name:"validate",rawName:"v-validate",value:"min:6|confirmed:confirmPasswordRef",expression:"'min:6|confirmed:confirmPasswordRef'"}],ref:"passwordRef",staticClass:"w-full py-2 px-3 border rounded focus:outline-none outline-none",class:{"border-red-400":e.errors.has("password"),"focus:border-gray-600":!e.errors.has("password")},attrs:{type:"password",name:"password",placeholder:"Your Password","data-vv-as":"Password"},domProps:{value:e.formData.password},on:{input:function(t){t.target.composing||e.$set(e.formData,"password",t.target.value)}}})]),e._v(" "),e.errors.has("password")?r("span",{staticClass:"text-red-700 text-xs pt-1 font-bold inline-block"},[e._v(e._s(e.errors.first("password")))]):e._e()]),e._v(" "),r("div",{staticClass:"mb-3"},[r("label",{staticClass:"font-bold",attrs:{for:"password_confirmation"}},[e._v("Confirm Password")]),e._v(" "),r("div",[r("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.password_confirmation,expression:"formData.password_confirmation"},{name:"validate",rawName:"v-validate",value:"confirmed:passwordRef",expression:"'confirmed:passwordRef'"}],ref:"confirmPasswordRef",staticClass:"w-full py-2 px-3 border rounded focus:outline-none outline-none",class:{"border-red-400":e.errors.has("password_confirmation"),"focus:border-gray-600":!e.errors.has("password_confirmation")},attrs:{type:"password",name:"password_confirmation",placeholder:"Password Confirmation","data-vv-as":"Password"},domProps:{value:e.formData.password_confirmation},on:{input:function(t){t.target.composing||e.$set(e.formData,"password_confirmation",t.target.value)}}})]),e._v(" "),e.errors.has("password_confirmation")?r("span",{staticClass:"text-red-700 text-xs pt-1 font-bold inline-block"},[e._v(e._s(e.errors.first("password_confirmation")))]):e._e()]),e._v(" "),e._m(1)])])],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"my-2 flex sm:flex-row justify-between items-center"},[t("h2",{staticClass:"text-2xl font-semibold leading-tight"},[this._v("Account Settings")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"flex justify-end"},[t("button",{staticClass:"items-center justify-center focus:outline-none outline-none flex border px-6 py-2 font-bold rounded text-white border-white bg-primary hover:bg-primary-lighter"},[this._v("UPDATE")])])}],!1,null,null,null);t.default=component.exports}}]);