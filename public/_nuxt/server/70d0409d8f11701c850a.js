exports.ids=[12],exports.modules={114:function(t,e,o){"use strict";var r=o(4),n={computed:{...Object(r.mapGetters)({totalProfit:"user_dashboard/totalProfit"})}},l=o(2),component=Object(l.a)(n,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flex"},[this._ssrNode('<div class="no-underline md:text-blue-dark flex items-center bg-primary rounded-full h-8 px-4 text-white text-sm leading-none">',"</div>",[e("number",{ref:"profit",attrs:{to:this.totalProfit,format:function(t){return t.formatMoney("â‚± ")},duration:.4}})],1)])},[],!1,null,null,"6792cc19");e.a=component.exports},137:function(t,e,o){"use strict";o.r(e);var r=o(4),n=o(83),l=o.n(n),d=o(114),c={layout:"user_dashboard",components:{VueTailwindModal:o(9).a,TotalProfitCounter:d.a},async mounted(){await this.$store.dispatch("user_dashboard/getPayoutsOf",this.user),await this.$store.dispatch("user_dashboard/getTotalProfitOf",this.user),this.isLoading=!1},data:()=>({isLoading:!0,isConfirmationLoading:!1,editingPayout:null,recipientData:{id:null,name:null,mobile:null,amount:0}}),computed:{...Object(r.mapGetters)({payouts:"user_dashboard/payouts",user:"user/user",totalProfit:"user_dashboard/totalProfit"}),computedTotalProfit(){return this.editingPayout&&this.editingPayout.id?this.totalProfit+this.editingPayout.amount:this.totalProfit}},methods:{showRequestPayoutModal(){this.recipientData={id:null,name:null,mobile:null,amount:0},this.$refs.requestPayoutModal.show()},cancelRequest(){this.$refs.requestPayoutModal.hide(),this.$nextTick(()=>{this.editingPayout=null,this.recipientData={id:null,name:null,mobile:null,amount:0}})},async sendRequest(){await this.$validator.validateAll("recipientForm")&&(this.$refs.requestPayoutModal.hide(),this.$refs.requestPayoutConfirmationModal.show())},cancelPayoutConfirmation(){this.$refs.requestPayoutConfirmationModal.hide(),this.$refs.requestPayoutModal.show()},formatTimestamp:t=>l()(t.toDate()).format("MMMM Do YYYY, h:mm:ss a"),async confirmPayoutRequest(){if(this.isConfirmationLoading)return;this.isConfirmationLoading=!0;const t=await this.$store.dispatch("user_dashboard/sendPayoutRequest",{user:this.user,payout:this.recipientData});if(this.isConfirmationLoading=!1,!t.status)return this.$refs.requestPayoutConfirmationModal.hide(),this.$refs.requestPayoutModal.show(),void this.$toast.error(t.message||"Your payout request has failed.",{position:"top"});this.editingPayout=null,this.$refs.requestPayoutConfirmationModal.hide(),this.$toast.success("Your payout request has been sent successfully.",{position:"top"})},showEditPayout(t){this.editingPayout=JSON.parse(JSON.stringify(t)),this.recipientData=JSON.parse(JSON.stringify(t)),this.$refs.requestPayoutModal.show()},cancelCancellationConfirmation(){this.$validator.reset(),this.$refs.payoutCancellationModal.hide(),this.$nextTick(()=>{this.recipientData={id:null,name:null,mobile:null,amount:0}})},showCancellationConfirmation(t){this.recipientData=t,this.$refs.payoutCancellationModal.show()},async cancelPayout(){if(this.isConfirmationLoading)return;this.isConfirmationLoading=!0;const t=await this.$store.dispatch("user_dashboard/cancelPayout",{user:this.user,payout:this.recipientData});this.isConfirmationLoading=!1,t.status?(this.recipientData={id:null,name:null,mobile:null,amount:0},this.$refs.payoutCancellationModal.hide(),this.$toast.success("Your payout request has been cancelled successfully.",{position:"top"})):this.$toast.error(t.message||"Your payout cancellation has failed. Please try again.",{position:"top"})}}},m=o(2),component=Object(m.a)(c,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"relative"},[t.isLoading?o("AreaLoader"):t._e(),t._ssrNode(" "),o("VueTailwindModal",{ref:"requestPayoutModal",attrs:{width:"30%","content-class":"rounded-none shadow-none text-gray-600",backdrop:!1}},[o("div",{staticClass:"flex flex-col h-full"},[o("div",{staticClass:"modal-heading border-b w-full p-4"},[o("div",{staticClass:"flex justify-between w-full items-center"},[o("div",{staticClass:"flex uppercase"},[o("strong",[t._v("REQUEST PAYOUT")])])])]),t._v(" "),o("div",{staticClass:"flex modal-body flex-col flex-grow p-4"},[o("div",{staticClass:"mb-3"},[o("label",{staticClass:"font-bold mr-4 mt-2",attrs:{for:"complete_name"}},[t._v("Complete Name")]),t._v(" "),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.recipientData.name,expression:"recipientData.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full py-2 px-3 border rounded focus:outline-none outline-none",class:{"border-red-400":t.errors.has("recipientForm.complete_name"),"focus:border-gray-600":!t.errors.has("recipientForm.complete_name")},attrs:{name:"complete_name",type:"text",placeholder:"Your Complete Name","data-vv-as":"Complete Name","data-vv-scope":"recipientForm"},domProps:{value:t.recipientData.name},on:{input:function(e){e.target.composing||t.$set(t.recipientData,"name",e.target.value)}}})]),t._v(" "),t.errors.has("recipientForm.complete_name")?o("span",{staticClass:"text-red-700 text-xs pt-1 font-bold inline-block"},[t._v(t._s(t.errors.first("recipientForm.complete_name")))]):t._e()]),t._v(" "),o("div",{staticClass:"mb-3"},[o("label",{staticClass:"font-bold mr-4 mt-2",attrs:{for:"mobile_number"}},[t._v("Mobile Number")]),t._v(" "),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.recipientData.mobile,expression:"recipientData.mobile"},{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"}],staticClass:"w-full py-2 px-3 border rounded focus:outline-none outline-none",class:{"border-red-400":t.errors.has("recipientForm.mobile_number"),"focus:border-gray-600":!t.errors.has("recipientForm.mobile_number")},attrs:{name:"mobile_number",type:"text",placeholder:"Your Mobile Number","data-vv-as":"Mobile Number","data-vv-scope":"recipientForm"},domProps:{value:t.recipientData.mobile},on:{input:function(e){e.target.composing||t.$set(t.recipientData,"mobile",e.target.value)}}})]),t._v(" "),t.errors.has("recipientForm.mobile_number")?o("span",{staticClass:"text-red-700 text-xs pt-1 font-bold inline-block"},[t._v(t._s(t.errors.first("recipientForm.mobile_number")))]):t._e()]),t._v(" "),o("div",[o("label",{staticClass:"font-bold mr-4 mt-2",attrs:{for:"amount"}},[t._v("Amount (PHP)")]),t._v(" "),o("div",[o("input",{directives:[{name:"model",rawName:"v-model.number",value:t.recipientData.amount,expression:"recipientData.amount",modifiers:{number:!0}},{name:"validate",rawName:"v-validate",value:"required|numeric|min_value:0|max_value:"+t.computedTotalProfit,expression:"`required|numeric|min_value:0|max_value:${computedTotalProfit}`"}],staticClass:"w-full py-2 px-3 border rounded focus:outline-none outline-none",class:{"border-red-400":t.errors.has("recipientForm.amount"),"focus:border-gray-600":!t.errors.has("recipientForm.amount")},attrs:{name:"amount",type:"number",placeholder:"Your Amount","data-vv-as":"Amount","data-vv-scope":"recipientForm"},domProps:{value:t.recipientData.amount},on:{input:function(e){e.target.composing||t.$set(t.recipientData,"amount",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),t._v(" "),t.errors.has("recipientForm.amount")?o("span",{staticClass:"text-red-700 text-xs pt-1 font-bold inline-block"},[t._v(t._s(t.errors.first("recipientForm.amount")))]):t._e()])]),t._v(" "),o("div",{staticClass:"flex modal-footer justify-between flex-shrink p-4 border-t items-center"},[o("PTButton",{attrs:{color:"default"},on:{click:t.cancelRequest}},[t._v("CANCEL")]),t._v(" "),o("PTButton",{attrs:{color:"primary"},on:{click:t.sendRequest}},[t._v("REQUEST")])],1)])]),t._ssrNode(" "),o("VueTailwindModal",{ref:"requestPayoutConfirmationModal",attrs:{width:"30%","content-class":"rounded-none shadow-none text-gray-600",backdrop:!1}},[o("div",{staticClass:"flex flex-col relative"},[t.isConfirmationLoading?o("AreaLoader"):t._e(),t._v(" "),o("div",{staticClass:"modal-heading border-b w-full p-4"},[o("div",{staticClass:"flex justify-center w-full items-center"},[o("div",{staticClass:"flex uppercase"},[o("strong",[t._v("CONFIRM PAYOUT REQUEST")])])])]),t._v(" "),o("div",{staticClass:"flex modal-body flex-col flex-grow p-4"},[o("div",[o("span",{staticClass:"font-bold"},[t._v("Complete Name:")]),t._v("\n          "+t._s(t.recipientData.name)+"\n        ")]),t._v(" "),o("div",[o("span",{staticClass:"font-bold"},[t._v("Mobile Number:")]),t._v("\n          "+t._s(t.recipientData.mobile)+"\n        ")]),t._v(" "),o("div",[o("span",{staticClass:"font-bold"},[t._v("Amount (PHP):")]),t._v("\n          "+t._s(t.recipientData.amount)+"\n        ")])]),t._v(" "),o("div",{staticClass:"flex modal-footer justify-between flex-shrink p-4 border-t items-celex modal-footer justify-center flex-shrink p-4 border-t nter"},[o("PTButton",{on:{click:t.cancelPayoutConfirmation}},[t._v("CANCEL")]),t._v(" "),o("PTButton",{attrs:{color:"primary"},on:{click:t.confirmPayoutRequest}},[t._v("CONFIRM")])],1)],1)]),t._ssrNode(" "),o("VueTailwindModal",{ref:"payoutCancellationModal",attrs:{width:"30%","content-class":"rounded-none shadow-none text-gray-600",backdrop:!1}},[o("div",{staticClass:"flex flex-col relative"},[t.isConfirmationLoading?o("AreaLoader"):t._e(),t._v(" "),o("div",{staticClass:"modal-heading border-b w-full p-4"},[o("div",{staticClass:"flex justify-center w-full items-center"},[o("div",{staticClass:"flex uppercase"},[o("strong",[t._v("CONFIRM PAYOUT CANCELLATION")])])])]),t._v(" "),o("div",{staticClass:"flex modal-body flex-col flex-grow p-4"},[t._v("\n        Are you sure that you want to cancel this request?\n      ")]),t._v(" "),o("div",{staticClass:"flex modal-footer justify-between flex-shrink p-4 border-t items-celex modal-footer justify-center flex-shrink p-4 border-t nter"},[o("PTButton",{on:{click:t.cancelCancellationConfirmation}},[t._v("NO")]),t._v(" "),o("PTButton",{attrs:{color:"primary"},on:{click:t.cancelPayout}},[t._v("YES")])],1)],1)]),t._ssrNode(" "),t._ssrNode('<div class="my-2 flex justify-between items-center">',"</div>",[t._ssrNode("<div>","</div>",[o("nuxt-link",{staticClass:"text-xs text-blue-500 hover:text-blue-700",attrs:{to:"/dashboard/collections"}},[o("font-awesome-icon",{attrs:{icon:["fas","arrow-left"]}}),t._v(" "),o("span",{staticClass:"ml-1"},[t._v("Back")])],1),t._ssrNode(' <h2 class="text-2xl font-semibold leading-tight">Payout</h2>')],2),t._ssrNode(" "),o("PTButton",{attrs:{color:"primary"},on:{click:t.showRequestPayoutModal}},[o("span",{staticClass:"mr-2"},[o("font-awesome-icon",{attrs:{icon:["fas","plus"]}})],1),t._v(" "),o("span",[t._v("Request Payout")])])],2),t._ssrNode(" "),t._ssrNode('<div class="flex justify-end flex-grow">',"</div>",[o("TotalProfitCounter")],1),t._ssrNode(" "),t._ssrNode('<div class="-mx-4 sm:-mx-8 px-4 sm:px-8 py-4 overflow-x-auto">',"</div>",[t._ssrNode('<div class="inline-block min-w-full border-l border-r overflow-hidden">',"</div>",[t._ssrNode('<table class="min-w-full leading-normal table-fixed">',"</table>",[t._ssrNode('<thead><tr><th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-xs font-semibold text-gray-600 uppercase tracking-wider text-left">Requested At</th> <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-xs font-semibold text-gray-600 uppercase tracking-wider text-left">Recipient</th> <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-xs font-semibold text-gray-600 uppercase tracking-wider text-center">Status</th> <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-xs font-semibold text-gray-600 uppercase tracking-wider text-center">Actions</th></tr></thead> '),t._ssrNode("<tbody>","</tbody>",[t._ssrNode((t.payouts.length?"\x3c!----\x3e":'<tr><td colspan="3" class="text-xl text-gray-600 px-5 py-5 border-b border-gray-200 bg-white text-sm text-center">You have no payout(s).</td></tr>')+" "),t._l(t.payouts,function(e){return t._ssrNode("<tr>","</tr>",[t._ssrNode('<td class="px-5 py-5 border-b border-gray-200 bg-white text-sm text-left"><div class="text-gray-900 whitespace-no-wrap">'+t._ssrEscape(t._s(t.formatTimestamp(e.created_at)))+'</div></td> <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm"><div><span class="font-bold">Complete Name:</span>'+t._ssrEscape("\n                  "+t._s(e.name)+"\n                ")+'</div> <div><span class="font-bold">Mobile Number:</span>'+t._ssrEscape("\n                  "+t._s(e.mobile)+"\n                ")+'</div> <div><span class="font-bold">Amount (PHP):</span>'+t._ssrEscape("\n                  "+t._s(e.amount)+"\n                ")+'</div></td> <td class="px-5 py-5 border-b border-gray-200 bg-white text-sm text-center"><span'+t._ssrClass("relative inline-block px-3 py-1 font-semibold leading-tight text-xs uppercase text-gray-800 rounded-full",{"bg-red-200":"declined"===e.status||"cancelled"===e.status,"bg-blue-200":"pending"===e.status,"bg-green-200":"paid"===e.status,"bg-yellow-200":"processing"===e.status})+">"+t._ssrEscape(t._s(e.status))+"</span></td> "),t._ssrNode('<td class="px-5 py-5 border-b border-gray-200 bg-white text-sm text-center">',"</td>",["pending"===e.status?t._ssrNode("<div>","</div>",[o("button",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0},expression:"{arrow: true}"}],staticClass:"px-2 py-1 text-xs hover:bg-gray-200 border rounded mx-1",attrs:{type:"button",title:"Cancel Request"},on:{click:function(o){return t.showCancellationConfirmation(e)}}},[o("font-awesome-icon",{attrs:{icon:["fas","times"]}}),t._ssrNode(' <span class="ml-1">CANCEL</span>')],2),t._ssrNode(" "),o("button",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0},expression:"{arrow: true}"}],staticClass:"px-2 py-1 text-xs hover:bg-gray-200 border rounded mx-1",attrs:{type:"button",title:"Edit Recipient"},on:{click:function(o){return t.showEditPayout(e)}}},[o("font-awesome-icon",{attrs:{icon:["fas","edit"]}}),t._ssrNode(' <span class="ml-1">EDIT</span>')],2)],2):t._e()])],2)})],2)],2)])])],2)},[],!1,null,null,"3c0319ac");e.default=component.exports}};
//# sourceMappingURL=70d0409d8f11701c850a.js.map