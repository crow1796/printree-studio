exports.ids=[1],exports.modules={136:function(e,t,r){"use strict";r.r(t);var o=r(4),d=r(98).a,l=r(2),c={layout:"admin_dashboard",components:{CollectionPreviewDrawer:Object(l.a)(d,function(){var e=this,t=this,r=t.$createElement,o=t._self._c||r;return o("VueTailwindDrawer",{ref:"drawer",staticClass:"text-sm",attrs:{width:"100%"}},[t.isLoading?o("AreaLoader",{attrs:{fullscreen:""}}):t._e(),t._v(" "),o("VueTailwindModal",{ref:"publishConfirmationModal",attrs:{width:"30%","content-class":"rounded-none shadow-none text-gray-600"}},[o("div",{staticClass:"flex flex-col"},[o("div",{staticClass:"modal-heading border-b w-full p-4"},[o("div",{staticClass:"flex justify-between w-full items-center"},[o("div",{staticClass:"flex uppercase justify-center flex-grow"},[o("strong",[t._v("Confirmation")])])])]),t._v(" "),o("div",{staticClass:"modal-body p-4 text-center"},[t._v("Are you sure you want to "+t._s("approval"===t.confirmationAction?"publish":"decline")+" this collection?")]),t._v(" "),o("div",{staticClass:"flex modal-footer justify-between flex-shrink p-4 border-t items-center"},[o("button",{staticClass:"justify-center items-center focus:outline-none outline-none border px-3 py-2 font-bold rounded text-gray-600 border-grey-lightest hover:bg-gray-100",attrs:{type:"button"},on:{click:function(){return e.$refs.publishConfirmationModal.hide()}}},[t._v("Cancel")]),t._v(" "),o("button",{staticClass:"shadow-xl border border-white bg-primary px-8 py-2 font-bold rounded text-white hover:bg-primary-lighter",attrs:{type:"button"},on:{click:t.publish}},[t._v("Yes")])])])]),t._v(" "),o("div",{staticClass:"flex flex-grow text-gray-600 overflow-hidden"},[o("div",{staticClass:"flex flex-col flex-grow"},[o("div",{staticClass:"flex flex-grow-0 items-center border-b p-4"},[o("div",{staticClass:"flex w-4/12 uppercase font-bold"},[o("div",{staticClass:"flex flex-col items-center"},[o("div",[t._v("TOTAL ESTIMATED PROFIT")]),t._v(" "),o("div",{staticClass:"text-primary"},[t.isCalculating?o("font-awesome-icon",{attrs:{icon:["fas","spinner"],spin:""}}):t._e(),t._v(" "),t.estimatedMinProfit?o("number",{ref:"estMinProfit",attrs:{animationPaused:"",to:t.estimatedMinProfit,format:function(e){return e.formatMoney("₱ ")},duration:.4}}):t._e(),t._v(" "),t.estimatedMinProfit?o("font-awesome-icon",{attrs:{icon:["fas","minus"]}}):t._e(),t._v(" "),o("number",{ref:"estMaxProfit",attrs:{animationPaused:"",to:t.estimatedMaxProfit,format:function(e){return e.formatMoney("₱ ")},duration:.4}})],1)])]),t._v(" "),o("div",{staticClass:"flex flex-grow justify-end"},[o("div",{staticClass:"select-none cursor-pointer w-8 h-8 border rounded-full flex justify-center items-center hover:border-gray-600 hover:text-gray-700",on:{click:t.hide}},[o("font-awesome-icon",{staticClass:"text-xs",attrs:{icon:["fas","times"]}})],1)])]),t._v(" "),o("div",{staticClass:"flex flex-grow"},[o("div",{staticClass:"flex flex-col overflow-auto w-9/12"},[o("div",{staticClass:"flex flex-grow p-4"},[o("div",{staticClass:"large-thumbnail w-6/12 flex flex-col"},[o("div",{staticClass:"flex relative justify-center items-center"},[o("button",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0},expression:"{arrow: true}"}],staticClass:"absolute top-0 left-0 border rounded flex justify-center items-center w-8 h-8 hover:text-primary hover:border-primary",attrs:{type:"button",title:"Rotate"},on:{click:t.switchSides}},[o("font-awesome-icon",{attrs:{icon:["fas","sync-alt"]}})],1),t._v(" "),t.selectedProduct.variants[t.selectedProductVariantKey].sides[t.selectedProductSide].is_empty?t._e():o("button",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0},expression:"{arrow: true}"}],staticClass:"absolute bottom-0 right-0 border rounded flex justify-center items-center w-8 h-8 hover:text-primary hover:border-primary",attrs:{type:"button",title:"Download ("+t.selectedProductSide.toUpperCase()+")"},on:{click:t.downloadDesign}},[o("font-awesome-icon",{attrs:{icon:["fas","download"]}})],1),t._v(" "),o("img",{staticClass:"w-3/5",attrs:{src:t.selectedProduct.variants[t.selectedProductVariantKey].sides[t.selectedProductSide].with_placeholder}})]),t._v(" "),o("div",{staticClass:"variants flex mt-4"},t._l(t.selectedProduct.variants,function(e,r){return o("div",{key:e.id,staticClass:"flex w-1/5 cursor-pointer border border-transparent hover:border-gray-500 p-1 rounded mr-1",class:{"border-gray-500 shadow-xl":t.selectedProductVariantKey===r},on:{click:function(){return t.selectedProductVariantKey=r}}},[o("div",{staticClass:"flex flex-col w-full"},[o("img",{attrs:{src:e.sides[t._firstPrintableAreaOf(e.sides)].with_placeholder}})])])}),0)]),t._v(" "),o("div",{staticClass:"flex flex-col mt-5 flex-grow ml-4"},[o("div",{staticClass:"text-4xl"},[o("span",{staticClass:"font-bold w-full outline-none"},[t._v(t._s(t.selectedProduct.meta.name))])]),t._v(" "),o("div",{staticClass:"text-3xl leading-none py-4 flex items-center"},[o("div",{staticClass:"relative flex flex-col"},[o("div",{staticClass:"text-xs text-gray-600 uppercase font-bold mb-1"},[t._v("Base Price")]),t._v(" "),o("div",[t._v("PHP "+t._s(t.selectedProductBasePrice)+" + ")])]),t._v(" "),o("div",{staticClass:"relative flex flex-col"},[o("div",{staticClass:"text-xs text-gray-600 uppercase font-bold mb-1"},[t._v("Profit*")]),t._v(" "),o("div",{staticClass:"flex"},[o("div",[t._v("PHP ")]),t._v(" "),o("div",[t._v(t._s(t.selectedProductProfit))]),t._v(" = \n                  ")])]),t._v(" "),o("div",{staticClass:"text-white bg-primary flex flex-col font-bold px-4 py-2 rounded"},[o("div",{staticClass:"text-xs uppercase font-bold mb-1"},[t._v(t._s("sell"===t.meta.plan?"Total Selling Price":"Sell it for"))]),t._v(" "),o("div",[t._v("PHP "+t._s(t.productTotalPrice))])]),t._v(" "),"buy"===t.meta.plan?o("div",{staticClass:"text-white bg-primary flex flex-col font-bold px-4 py-2 rounded ml-2"},[o("div",{staticClass:"text-xs uppercase font-bold mb-1"},[t._v("Pay Only")]),t._v(" "),o("div",[t._v("PHP "+t._s(t.selectedProductBasePrice))])]):t._e()]),t._v(" "),o("div",[o("div",{staticClass:"font-bold"}),t._v(" "),o("div",{staticClass:"flex flex-wrap"},t._l(t.selectedProduct.variants[t.selectedProductVariantKey].sizes,function(e,i){return o("div",{key:i,staticClass:"mr-2 rounded font-bold mt-2",class:{" px-4 py-2 border hover:border-gray-600":t.selectedProductSizes[i].quantity}},[t.selectedProductSizes[i].quantity?o("div",{staticClass:"flex items-center"},[o("div",{staticClass:"text-center mr-2"},[t._v(t._s(i)+":")]),t._v(" "),o("div",[t._v(t._s(t.selectedProductSizes[i].quantity))])]):t._e()])}),0),t._v(" "),t.selectedProduct.meta.description?o("div",{staticClass:"mt-2"},[o("div",{staticClass:"w-full border rounded p-4 outine-none resize-none"},[t._v(t._s(t.selectedProduct.meta.description))])]):t._e()])])])]),t._v(" "),o("div",{staticClass:"flex border-l w-3/12"},[o("div",{staticClass:"flex flex-col w-full"},[o("div",{staticClass:"flex p-4 uppercase border-b"},[o("strong",[t._v("OTHER PRODUCTS")])]),t._v(" "),o("div",{staticClass:"overflow-auto h-full"},[o("div",{staticClass:"flex p-4 flex-wrap"},t._l(t.generatedProducts,function(e){return o("div",{key:e.id,staticClass:"flex w-6/12 p-1"},[o("div",{staticClass:"flex flex-col border rounded w-full cursor-pointer hover:border-gray-500",class:{"border-gray-500 shadow-xl":t.selectedProduct.id===e.id},on:{click:function(r){return t.selectProduct(e)}}},[o("div",{staticClass:"px-2 pt-2"},[o("img",{attrs:{src:t._placeholderOfFirstVariantOf(e)}})])])])}),0)])])])]),t._v(" "),o("div",{staticClass:"flex p-4 items-center border-t",class:{"justify-end":"declined"===t.meta.status,"justify-between":"pending"===t.meta.status}},["declined"!==t.meta.status?o("PTButton",{on:{click:function(e){return t.confirmAction("decline")}}},[t._v("DECLINE")]):t._e(),t._v(" "),"approved"!==t.meta.status?o("PTButton",{attrs:{color:"primary"},on:{click:function(e){return t.confirmAction("approval")}}},[t._v("PUBLISH")]):t._e()],1)])])],1)},[],!1,null,null,"d42a3674").exports},async created(){try{await this.$store.dispatch("admin/getCollections"),this.isLoading=!1}catch(e){}},data:()=>({isLoading:!0,generatedImages:[],collectionMeta:null}),computed:{...Object(o.mapGetters)({collections:"admin/collections"})},methods:{async previewCollection(e){this.isLoading=!0;const t=await this.$store.dispatch("designer/fetchDesignData",e.id),r=await this.$store.dispatch("designer/generatePreview",t);this.isLoading=!1,this.generatedImages=r.data,this.collectionMeta=e,this.$nextTick(()=>{this.$refs.collectionPreviewDrawer.show()})}}},n=Object(l.a)(c,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"sm:px-8 relative"},[e.isLoading?r("AreaLoader"):e._e(),e._ssrNode(" "),e.generatedImages.length?r("CollectionPreviewDrawer",{ref:"collectionPreviewDrawer",attrs:{products:e.generatedImages,meta:e.collectionMeta}}):e._e(),e._ssrNode(" "),e._ssrNode("<div>","</div>",[e._ssrNode('<div class="my-2 flex sm:flex-row justify-between items-center"><h2 class="text-2xl font-semibold leading-tight">All Collections</h2></div> '),e._ssrNode('<div class="-mx-4 sm:-mx-8 px-4 sm:px-8 py-4 overflow-x-auto">',"</div>",[e._ssrNode('<div class="inline-block min-w-full border-l border-r overflow-hidden">',"</div>",[e._ssrNode('<table class="min-w-full leading-normal table-fixed">',"</table>",[e._ssrNode('<thead><tr><th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-xs font-semibold text-gray-600 uppercase tracking-wider text-left">Name</th> <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-xs font-semibold text-gray-600 uppercase tracking-wider text-left">Progress</th> <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-xs font-semibold text-gray-600 uppercase tracking-wider text-center">Status</th> <th class="px-5 py-3 border-b-2 border-gray-200 bg-gray-100 text-xs font-semibold text-gray-600 uppercase tracking-wider text-center">Actions</th></tr></thead> '),e._ssrNode("<tbody>","</tbody>",e._l(e.collections,function(col){return e._ssrNode("<tr"+e._ssrClass(null,{"bg-red-100":"declined"===col.status})+">","</tr>",[e._ssrNode('<td class="px-5 py-5 border-b border-gray-200 text-sm text-center">',"</td>",[e._ssrNode('<div class="flex items-center">',"</div>",[e._ssrNode('<div class="ml-3">',"</div>",[e._ssrNode('<p class="text-gray-900 whitespace-no-wrap flex items-center">',"</p>",[e._ssrNode("<span"+e._ssrClass("relative text-xs inline-block px-3 py-1 font-semibold leading-tight mr-2",{"text-white":"sell"===col.plan,"text-blue-800":"buy"===col.plan})+"><span aria-hidden"+e._ssrClass("absolute inset-0 rounded-full",{"bg-primary":"sell"===col.plan,"bg-blue-400":"buy"===col.plan})+'></span> <span class="relative uppercase">'+e._ssrEscape(e._s(col.plan))+'</span></span> <a href="#" class="text-blue-600 hover:underline"><span>'+e._ssrEscape(e._s(col.name))+"</span></a> "),r("a",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0},expression:"{arrow: true}"}],staticClass:"ml-2 text-gray-400 hover:text-gray-600",attrs:{href:"#",title:"Feature this Collection"}},[r("font-awesome-icon",{attrs:{icon:["fas","star"]}})],1)],2)])])]),e._ssrNode(' <td class="px-5 py-5 border-b border-gray-200 text-sm text-center">'+("sell"===col.plan?'<div class="border bg-gray-200 w-full bg-grey-light rounded-full"><div class="bg-primary text-xs rounded-full leading-none py-1 text-center text-white" style="width: 45%">45%</div></div>':"<div>\n                  N/A\n                </div>")+'</td> <td class="px-5 py-5 border-b border-gray-200 text-sm text-center"><span class="relative inline-block px-3 py-1 font-semibold leading-tight text-xs"><span aria-hidden'+e._ssrClass("absolute inset-0 rounded-full",{"bg-green-200":"approved"===col.status,"bg-red-300":"declined"===col.status,"bg-blue-200":"pending"===col.status})+'></span> <span class="relative uppercase">'+e._ssrEscape(e._s(col.status))+"</span></span></td> "),e._ssrNode('<td class="px-5 py-5 border-b border-gray-200 text-sm text-center">',"</td>",[e._ssrNode("<div>","</div>",[r("button",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0},expression:"{arrow: true}"}],staticClass:"px-2 py-1 text-xs bg-white hover:bg-gray-200 border rounded mx-1",attrs:{type:"button",title:"Delete"},on:{click:function(t){return e.showDeleteCollectionConfirmation(col)}}},[r("font-awesome-icon",{attrs:{icon:["fas","trash"]}})],1),e._ssrNode(" "),r("button",{directives:[{name:"tippy",rawName:"v-tippy",value:{arrow:!0},expression:"{arrow: true}"}],staticClass:"px-2 py-1 text-xs bg-white hover:bg-gray-200 border rounded mx-1",attrs:{type:"button",title:"Share"}},[r("font-awesome-icon",{attrs:{icon:["fas","share-alt"]}})],1)],2)])],2)}),0)],2)])])],2)],2)},[],!1,null,null,"67922ff6");t.default=n.exports},98:function(e,t,r){"use strict";(function(e){var o=r(9),d=r(28);t.a={props:{products:{required:!0},meta:{required:!0}},components:{VueTailwindDrawer:d.a,VueTailwindModal:o.a},data(){return{selectedProductSide:null,confirmationAction:null,isLoading:!1,selectedProduct:null,generatedProducts:JSON.parse(JSON.stringify(this.products)),selectedProduct:this.products.length?JSON.parse(JSON.stringify(this.products[0])):null,selectedProductVariantKey:this.products.length?e.first(e.keys(JSON.parse(JSON.stringify(this.products[0])).variants)):null,selectedSize:null,selectedProductProfit:0,selectedProductSizes:[],estimatedMinProfit:0,estimatedMaxProfit:0,selectedProductBasePrice:0,calculatorTimeout:null,isCalculating:!1}},methods:{switchSides(){const t=e.keys(this.selectedProduct.variants[this.selectedProductVariantKey].sides),r=t.indexOf(this.selectedProductSide),o=t[r+1];this.selectedProductSide=o||e.first(t)},downloadDesign(){const e=`${this.selectedProduct.meta.name}-${this.selectedProduct.id}`,t="image/svg+xml";let content=this.selectedProduct.variants[this.selectedProductVariantKey].sides[this.selectedProductSide].design,r=new Blob([content],{type:t}),a=document.createElement("a");a.download=`(${this.selectedProductSide.toUpperCase()})${e}.svg`,a.href=URL.createObjectURL(r),a.dataset.downloadurl=[t,a.download,a.href].join(":"),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),setTimeout(function(){URL.revokeObjectURL(a.href)},1500)},async publish(){this.isLoading=!0,this.$refs.publishConfirmationModal.hide(),await this.$store.dispatch("admin/updateCollection",{id:this.meta.id,data:{status:"approval"===this.confirmationAction?"approved":"declined"}}),this.isLoading=!1},selectProduct(e){this.selectedProduct=JSON.parse(JSON.stringify(e))},_placeholderOfFirstVariantOf(t){const r=e.first(e.keys(t.variants));return t.variants[r].sides[this._firstPrintableAreaOf(t.variants[r].sides)].with_placeholder},_firstPrintableAreaOf(t){let r=e.keys(t);return e.includes(r,"front")?"front":e.head(r)},show(){this.$refs.drawer.show(),this.calculateProfit()},hide(){this.$refs.drawer.hide()},_calculateEstProfit(){let t=0;e.map(this.generatedProducts,r=>{e.map(r.variants,r=>{e.map(r.sizes,(o,d)=>{let l=e.find(r.available_sizes,s=>s.name==d);if(!l)return;let c=l.base_cost,n=c*o.quantity,f=(c+o.price)*o.quantity;t+=f-n})})});let r=t-.05*t,o=t+.05*t;this.estimatedMinProfit=r,this.estimatedMaxProfit=o,this.$nextTick(()=>{this.$refs.estMinProfit&&this.$refs.estMinProfit.play(),this.$refs.estMaxProfit&&this.$refs.estMaxProfit.play()})},calculateProfit(){clearTimeout(this.calculatorTimeout),this.isCalculating=!0,this.calculatorTimeout=setTimeout(()=>{this._calculateEstProfit(),this.isCalculating=!1},2e3)},confirmAction(e){this.confirmationAction=e,this.$refs.publishConfirmationModal.show()}},computed:{productTotalPrice(){return this.selectedProductBasePrice+this.selectedProductProfit},hasPreviousProductOrVariant(){const t=e.keys(this.selectedProduct.variants),r=t[t.indexOf(this.selectedProductVariantKey)-1];return e.findIndex(this.generatedProducts,{id:this.selectedProduct.id})>0||r}},watch:{selectedProduct:{immediate:!0,handler(t,r){if(!t)return;const o=e.first(e.keys(t.variants));this.selectedProductSizes=t.variants[o].sizes,this.selectedProductVariantKey=o;const d=e.first(e.keys(this.selectedProductSizes));this.selectedProductBasePrice=e.first(t.variants[o].available_sizes).base_cost,this.selectedProductSide=this._firstPrintableAreaOf(t.variants[this.selectedProductVariantKey].sides),this.selectedProductProfit=t.variants[o].sizes[d].price,e.keys(this.selectedProductSizes).map(s=>this.selectedProductSizes[s].price=this.selectedProductProfit),this.selectedProduct.variants[this.selectedProductVariantKey].sizes=this.selectedProductSizes,this._calculateEstProfit()}},selectedProductVariantKey:{immediate:!0,handler(t){if(!this.selectedProduct)return;this.selectedProductSizes=this.selectedProduct.variants[t].sizes;e.first(e.keys(this.selectedProductSizes));this.generatedProducts[e.findIndex(this.generatedProducts,{id:this.selectedProduct.id})].variants[t].sizes=this.selectedProductSizes}},selectedProductProfit:{immediate:!0,handler(t){if(!this.selectedProduct)return;const r=e.first(e.keys(this.selectedProduct.variants));this.selectedProductSizes=this.selectedProduct.variants[r].sizes;e.first(e.keys(this.selectedProductSizes));e.keys(this.selectedProductSizes).map(s=>this.selectedProductSizes[s].price=t),this.generatedProducts[e.findIndex(this.generatedProducts,{id:this.selectedProduct.id})].variants[this.selectedProductVariantKey].sizes=this.selectedProductSizes,this.calculateProfit()}}}}}).call(this,r(6))}};
//# sourceMappingURL=e3f9e5e528b23b39922e.js.map